labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
ggarrange(cantidad, var.empresas, nrow=2)
cantidad<-empresas  %>% ggplot(aes(x=periodo, y=`Total empresas`))+
geom_line(group=1,size=1, color="#29aee4")+
scale_y_continuous(limits=c(0,7000),breaks=seq(0,7000,1000))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),105))+
labs(y = "", title="Evolución en cantidad de empresas", x = "") +
theme(axis.text.x = element_text(size=8,vjust=0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),axis.line = element_line("BLACK"), axis.ticks.y = element_line(), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks.x = element_blank())
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),105))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
ggarrange(cantidad, var.empresas, nrow=2)
empresas<- read_excel("total de empresas.xlsx")
empresas$periodo<- as.Date(empresas$periodo)
empresas$`Variación interanual en %`[is.na(empresas$`Variación interanual en %`)]<-0
cantidad<-empresas  %>% ggplot(aes(x=periodo, y=`Total empresas`))+
geom_line(group=1,size=1, color="#29aee4")+
scale_y_continuous(limits=c(0,7000),breaks=seq(0,7000,1000))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),105))+
labs(y = "", title="Evolución en cantidad de empresas", x = "") +
theme(axis.text.x = element_text(size=8,vjust=0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),axis.line = element_line("BLACK"), axis.ticks.y = element_line(), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks.x = element_blank())
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),105))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
ggarrange(cantidad, var.empresas, nrow=2)
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),120))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-10-01"),100))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-12-01"),100))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-12-01"),120))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-12-01"),105))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-12-01"),110))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
var.empresas<- empresas %>% ggplot(aes(x=periodo, y=`Variación interanual en %`))+
geom_bar(stat='identity',size=3, fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), breaks=c(-0.3,-0.2,-0.1,0,0.1,0.2))+
scale_x_date(labels=date_format(format="%h-%Y"), breaks=seq(as.Date("2017-01-01"),as.Date("2021-12-01"),90))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR.</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.line.y = element_line("BLACK"), axis.ticks.x= element_blank())
var.empresas
knitr::opts_chunk$set(echo = FALSE,warning = F,message=F, dev="cairo_pdf")
knitr::opts_chunk$set(echo = FALSE,warning = F,message=F, dev="cairo_pdf")
library(tidyverse)
library(readxl)
library(ggplot2)
library(extrafont)
library(ggtext)
library(scales)
library(treemapify)
#Fuente
font_import(paths = "~/GitHub/agricultura y ganaderia/agricultura_ganaderia/Open_Sans",prompt=F)
loadfonts(device = "win", quiet=T)
#Colores
colores<- c("#29aee4","#0c8136","#e22172","#f4a018","#428cb4","#c85687","#dbac2f","#5da14a","#ff9a00")
gradiente<- c("#ed3068","#ef4275","#f3789d","#f69cb7","#fbd2de")
colores_oscuros <- c("#053b19", "#b77409", "#a11550", "#1680ab", "#085222",  "#1891c2")
colores_claros <- c("#13c753",  "#f7be61", "#eb659d", "#6dc8ed", "#10b04a", "#56bfea")
empresas<-read_excel("Agricultura y Ganaderia.xlsx",sheet=1)
colnames(empresas)<- c('fecha','Cantidad Empresas', 'Variación Interanual')
empresas$fecha<- as.Date(empresas$fecha, origin='2017-01-01')
ggplot(empresas,aes(x=fecha,y= `Cantidad Empresas`))+
geom_line(group=1,size=1.2, colour="#29aee4")+
scale_y_continuous(limits=c(5,25))+
scale_x_date(labels = date_format('%h-%Y'), breaks = seq(as.Date('2017-01-01'),as.Date('2021-09-01'), 120))+
labs(y= "", x="" ,title ="Cantidad de empresas en el sector agrícola y ganadero", caption="<span style='color: #5f6368;'>Fuente: Elaboración propia con datos obtenidos de ACOR.</span>")+
theme(text = element_text(family = "Open Sans", colour = "BLACK"), plot.title = element_markdown(size=14),axis.line = element_line(color='BLACK'), plot.title.position = "plot", plot.subtitle = element_text(size = 10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 1), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 9),axis.text.x=(element_text(size=8,angle=45,vjust = 0.5)),plot.caption = element_markdown(size=8,hjust = 0), panel.background = element_blank(),strip.background = element_blank(),strip.text = element_text(face = 'bold'),axis.ticks.x = element_blank())
ggplot(empresas,aes(x=fecha,y= `Cantidad Empresas`))+
geom_line(group=1,size=1.2, colour="#29aee4")+
scale_y_continuous(limits=c(5,25))+
scale_x_date(labels = date_format('%h-%Y'), breaks = seq(as.Date('2017-01-01'),as.Date('2022-01-01'), 120))+
labs(y= "", x="" ,title ="Cantidad de empresas en el sector agrícola y ganadero", caption="<span style='color: #5f6368;'>Fuente: Elaboración propia con datos obtenidos de ACOR.</span>")+
theme(text = element_text(family = "Open Sans", colour = "BLACK"), plot.title = element_markdown(size=14),axis.line = element_line(color='BLACK'), plot.title.position = "plot", plot.subtitle = element_text(size = 10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 1), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 9),axis.text.x=(element_text(size=8,angle=45,vjust = 0.5)),plot.caption = element_markdown(size=8,hjust = 0), panel.background = element_blank(),strip.background = element_blank(),strip.text = element_text(face = 'bold'),axis.ticks.x = element_blank())
#Composicion de las exportaciones provinciales
exportaciones<-read_excel("Agricultura y Ganaderia.xlsx",sheet=5)
exportaciones<- exportaciones[-c(1:17)]
exportaciones<-exportaciones[1:8,]
exportaciones[is.na(exportaciones)] <- 0
exportaciones<-as.data.frame(t(exportaciones))
names(exportaciones)<- c(exportaciones[1,])
exportaciones<-rownames_to_column(.data = exportaciones,var = 'fecha')
exportaciones<-exportaciones[2:6,]
exportaciones<- pivot_longer(exportaciones,-fecha)
exportaciones$value<-as.numeric(exportaciones$value)
exportaciones<- exportaciones %>%  mutate(fecha=case_when(fecha=="2016...19" ~2016,
fecha=='2017...20'~2017,
fecha=='2018...21'~2018,
fecha=='2019...22'~2019,
fecha=='2020...23'~2020),
name=case_when(name=='Café, té, yerba mate y especias' ~ 'Café, té, \nyerba mate y especias',
name=='Preparados de hortalizas, legumbres y frutas' ~ 'Preparados de hortalizas, \nlegumbres y frutas',
TRUE~name))
ggplot(exportaciones, aes(x=fecha, y=value, fill=name)) +
geom_col(position='stack',size=0.8,width = 0.3)+
coord_flip()+
scale_y_continuous(labels=scales::percent_format())+
scale_fill_manual(values=colores)+
labs(y = "", title="Composición de exportaciones provinciales", x = "", caption = "<span style='color: #5f6368;'>Fuente: Elaboración propia con datos obtenidos de INDEC.</span>") +
theme(axis.text.x = element_text(size=10), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 7),legend.key.size = unit(0.5,'cm'), legend.title = element_blank(), plot.caption = element_markdown(size=8,hjust = 0,colour = "BLACK") , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 8), panel.background = element_blank(), panel.grid.major = element_blank(), axis.ticks.y=element_blank())
paises<-read_excel("Agricultura y Ganaderia.xlsx", sheet = 6)
paises<-paises[ -c(1), ]
paises<- paises %>% mutate(continente=case_when(
region%in%c("Magreb y Egipto","Medio Oriente", "SACU")~ "AFRICA",
region%in%c("Unión Europea (1)", "Reino Unido", "Suiza")~"EUROPA",
region%in%c("Mercosur", "Chile","Resto ALADI","SICA")~"LATAM",
region=="NAFTA"~"NORTE AMERICA \ny MEXICO",
region=="Oceanía"~"OCEANIA",
region%in%c("ASEAN","China","Japón","India","República de Corea")~ "ASIA",
region=="CEI"~ "EUROPA ORIENTAL",
region=="Resto del mundo" ~ "RESTO DEL \nMUNDO"))
paises.2<- paises %>% group_by(continente) %>% summarise("1S 2021"= sum(`1S 2021`))
ggplot(paises.2,aes(area=`1S 2021`, fill=continente, label=continente))+
geom_treemap()+
geom_treemap_text(color="#000000",place="center", family="Open Sans")+
scale_fill_manual(values=c("#13c753","#0a6a2c","#13c753","#e1ffdb","#053b19","#88fc6f","#e1ffdb","#88fc6f"))+
labs(title="Destino de las exportaciones provinciales", subtitle="Primer semestre 2021" ,y="",x="",caption = "<span style='color:  #5f6368;'>Fuente: elaboración propia con datos obtenidos de INDEC.</span>") +
theme(axis.text.x = element_text(size=8),axis.line = element_line(color='BLACK'),axis.ticks.y = element_blank(), text = element_text(family = "Open Sans"), plot.title = element_markdown(family = "Open Sans", size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), legend.position = "none", legend.text = element_text(size = 5), legend.title = element_text(),axis.title = element_text(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
base.faena<-read_excel("Agricultura y Ganaderia.xlsx", sheet = 3)
base.faena[c(4,5,6,7,8,9,10,11)]<-list(NULL)
colnames(base.faena)<- c('fecha','Faena Bovina','Faena Porcina')
#base.faena$fecha<-as.Date(base.faena$fecha,"%y,%m,%d")
base.faena<-base.faena %>% pivot_longer(-c("fecha"))
base.faena$fecha<-as.Date(base.faena$fecha, origin='2018-01-01')
base.faena %>% ggplot( aes(x=fecha,y=value))+
geom_point(size=3,aes(color=name))+
geom_line(size=1, aes(color=name,group=name)) +
scale_color_manual(values=colores)+
facet_wrap(facets= vars(name),scales = 'free', nrow = 2)+
scale_x_date(labels = scales::date_format(format = '%h-%Y'),breaks = seq(as.Date('2018-01-01'),as.Date('2022-01-01'),120))+
labs(y= "", x="" ,title ="Faena <span style = 'color: #29aee4;'>**bovina**</span> y <span style = 'color: #0c8136;'>**porcina**</span> de la Provincia de Corrientes <br>(por cabeza)", subtitle='',caption="<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de INDEC.</span>")+
theme(text = element_text(family = "Open Sans", colour = "BLACK"), axis.line =element_line(color='BLACK') ,plot.title = element_markdown(size=14), plot.title.position = "plot", plot.subtitle=element_text(size=10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 10), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 9),axis.text.x = element_text(size=8,angle=45,vjust = 0.5),plot.caption = element_markdown(size=8, hjust=0), panel.background = element_blank(),strip.background = element_blank(),strip.text = element_text(face = 'bold'), axis.ticks.x =element_blank() )
View(empresas)
knitr::opts_chunk$set(echo = FALSE,warning = F,message=F, dev="cairo_pdf")
library(tidyverse)
library(readxl)
library(ggplot2)
library(extrafont)
library(ggtext)
library(scales)
library(ggpubr)
library(lubridate)
library(plotly)
#Fuente
font_import(paths = "~/GitHub/construccion/Open_Sans",prompt=F)
loadfonts(device = "win", quiet=T)
#Colores
colores<- c("#29aee4","#0c8136","#e22172","#f4a018","#428cb4","#c85687","#dbac2f","#5da14a","#ff9a00")
gradiente<- c("#ed3068","#ef4275","#f3789d","#f69cb7","#fbd2de")
colores_oscuros <- c("#053b19", "#b77409", "#a11550", "#1680ab", "#085222",  "#1891c2")
colores_claros <- c("#13c753",  "#f7be61", "#eb659d", "#6dc8ed", "#10b04a", "#56bfea")
empresas<-read_excel("CONSTRUCCION.xlsx",sheet = 1)
empresas[c(4,5,6,7,8)]<-list(NULL)
empresas[is.na(empresas)]<-0
empresas$Periodo<- as.Date(empresas$Periodo)
n.empresas<- empresas %>%filter(Periodo< as.Date("2021-09-01")) %>%  ggplot(aes(x=Periodo, y=`Cantidad de empresas de la construcción`))+
geom_line(size=1,color="#29aee4")+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2021-09-01'),100))+
scale_y_continuous( limits=c(40,61),breaks=seq(45,65,5))+
labs(y = "", title="Empresas del sector construcción", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,vjust = 0.5, angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
var.inter<- empresas %>% filter(Periodo< as.Date("2021-09-01")) %>%  ggplot(aes(x=Periodo,y=`Variación internanual en %`))+
geom_bar(stat = 'identity', fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2021-09-01'),100))+
scale_y_continuous(labels=percent_format(),breaks=seq(-0.3,0.3,0.1))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5, angle=45),axis.line.y = element_line(color='BLACK'),axis.ticks = element_blank(), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(n.empresas,var.inter,nrow = 2)
#ggsave("unnamed-chunk-2-1.pdf", height = 4.5)
n.empresas<- empresas %>% ggplot(aes(x=Periodo, y=`Cantidad de empresas de la construcción`))+
geom_line(size=1,color="#29aee4")+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
scale_y_continuous( limits=c(40,61),breaks=seq(45,65,5))+
labs(y = "", title="Empresas del sector construcción", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,vjust = 0.5, angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
var.inter<- empresas %>%  ggplot(aes(x=Periodo,y=`Variación internanual en %`))+
geom_bar(stat = 'identity', fill="#29aee4")+
geom_hline(yintercept = 0)+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
scale_y_continuous(labels=percent_format(),breaks=seq(-0.3,0.3,0.1))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de ACOR</span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5, angle=45),axis.line.y = element_line(color='BLACK'),axis.ticks = element_blank(), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(n.empresas,var.inter,nrow = 2)
m2<- read_excel("CONSTRUCCION.xlsx",sheet=2)
m2[c(4)]<-list(NULL)
m2[is.na(m2)]<-0
m2$período<- ymd(m2$período)
M.2<-expression(m^2)
m2.autorizados<- m2 %>%  filter(período>= as.Date("2017-01-01")) %>% ggplot(aes(x=período,y=`m2 autorizados para la construcción`))+
geom_line(group=1,size=1,colour="#0c8136")+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2016-01-01"), as.Date("2021-08-01"),112))+
scale_y_continuous(limits=c(0,40000),breaks=seq(0,40000,10000))+
labs(y = M.2, title="m^2 autorizados para la construcción", x = "") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14),axis.line = element_line(color='BLACK'), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
var.inter.m2<- m2 %>%   filter(período>= as.Date("2017-01-01")) %>% ggplot(aes(x=período,y=`Variación interanual en %`))+
geom_hline(yintercept = 0)+
geom_bar(stat='identity', fill="#0c8136")+
scale_y_continuous(labels=percent_format(), limits = c(-2,6),breaks=seq(-1,4.5,1))+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2016-01-01"), as.Date("2021-08-01"),112))+
annotate("segment", x=as.Date("2020-08-01"),xend =as.Date("2020-08-01"),  y=0, yend=6, colour="#053b19", size=3)+
annotate("segment", x=as.Date("2021-02-01"),xend =as.Date("2021-02-01"),  y=0, yend=6, colour="#053b19", size=3)+
annotate("segment", x=as.Date("2021-04-01"),xend =as.Date("2021-04-01"),  y=0, yend=6, colour="#053b19", size=3)+
coord_cartesian(ylim = c(-2, 4.5), clip = "off")+
labs(y = "", title="Variación interanual" , x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC.</span>") +
theme(axis.text.x = element_text(size=8,vjust =0.3,angle=45),axis.line.y = element_line(color='BLACK'),axis.ticks.x = element_blank(), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
ggarrange(m2.autorizados,var.inter.m2,nrow = 2)
#ggsave("unnamed-chunk-3-1.pdf", height=4.5)
View(m2)
trabajadores<- read_excel("CONSTRUCCION.xlsx",sheet=3)
trabajadores[c(4,5,6,7,8,9)]<-list(NULL)
trabajadores[is.na(trabajadores)]<-0
trabajadores<- trabajadores %>% rename( periodo=...1)
trabajadores[is.na(trabajadores)]<-0
trabajadores$periodo<- as.Date(trabajadores$periodo)
nro.trabajadores<- trabajadores %>% filter(periodo>= as.Date("2017-01-01")) %>%  ggplot(aes(x=periodo, y=`Trabajadores registrados en el sector`))+
geom_line(group=1,size=1,colour="#e22172")+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2017-01-01"), as.Date("2021-12-01"),100))+
scale_y_continuous(limits=c(2000,8000),breaks=seq(0,8000,1000))+
labs(y = "", title="Trabajadores en el sector construcción", x = "") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks =element_blank())
var.inter.trabajadores<- trabajadores %>% filter(periodo>= as.Date("2017-01-01")) %>%  ggplot(aes(x=periodo, y=`Variación interanual en%`))+
geom_bar(stat='identity', fill="#e22172")+
geom_hline(yintercept = 0)+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2017-01-01"), as.Date("2021-12-01"),105))+
scale_y_continuous(labels=percent_format(),limits=c(-0.3,0.5),breaks=seq(-0.3,0.4,0.2))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC. </span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line.y = element_line(color='BLACK'),axis.ticks =element_blank(), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(nro.trabajadores,var.inter.trabajadores,nrow=2)
#ggsave("unnamed-chunk-4-1.pdf", height = 4.5)
View(trabajadores)
nro.trabajadores<- trabajadores %>% filter(periodo>= as.Date("2017-01-01")) %>%  ggplot(aes(x=periodo, y=`Trabajadores registrados en el sector`))+
geom_line(group=1,size=1,colour="#e22172")+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2017-01-01"), as.Date("2022-01-01"),120))+
scale_y_continuous(limits=c(2000,8000),breaks=seq(0,8000,1000))+
labs(y = "", title="Trabajadores en el sector construcción", x = "") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks =element_blank())
var.inter.trabajadores<- trabajadores %>% filter(periodo>= as.Date("2017-01-01")) %>%
ggplot(aes(x=periodo, y=`Variación interanual en%`))+
geom_bar(stat='identity', fill="#e22172")+
geom_hline(yintercept = 0)+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2017-01-01"), as.Date("2022-01-01"),105))+
scale_y_continuous(labels=percent_format(),limits=c(-0.3,0.5),breaks=seq(-0.3,0.4,0.2))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC. </span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line.y = element_line(color='BLACK'),axis.ticks =element_blank(), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(nro.trabajadores,var.inter.trabajadores,nrow=2)
var.inter.trabajadores<- trabajadores %>% filter(periodo>= as.Date("2017-01-01")) %>%
ggplot(aes(x=periodo, y=`Variación interanual en%`))+
geom_bar(stat='identity', fill="#e22172")+
geom_hline(yintercept = 0)+
scale_x_date(labels=date_format(format = "%h-%Y"),breaks = seq(as.Date("2017-01-01"), as.Date("2022-01-01"),120))+
scale_y_continuous(labels=percent_format(),limits=c(-0.3,0.5),breaks=seq(-0.3,0.4,0.2))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC. </span>") +
theme(axis.text.x = element_text(size=8,vjust = 0.5,angle=45), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line.y = element_line(color='BLACK'),axis.ticks =element_blank(), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(nro.trabajadores,var.inter.trabajadores,nrow=2)
cemento<-read_excel("CONSTRUCCION.xlsx",sheet=5)
cemento[c(6,7)]<- list(NULL)
cemento<- cemento[- c(1,2,3,4), ]
cemento<- cemento %>% rename(periodo=`Despachos mensuales de Cemento Portland por tipo de envase`,bolsa=...2, granel=...3, var.bolsa=...4,var.granel=...5)
cemento$var.bolsa[is.na(cemento$var.bolsa)]<-0
cemento$var.granel[is.na(cemento$var.granel)]<-0
cemento$periodo<- as.numeric(cemento$periodo)
cemento$periodo<-as.Date(cemento$periodo,origin="1899-12-30")
cemento$periodo<-as.Date(cemento$periodo)
cemento$bolsa<-as.numeric(cemento$bolsa)
cemento$var.bolsa<-as.numeric(cemento$var.bolsa)
bolsa.graf<-cemento %>% filter(periodo>='2017-01-01') %>% ggplot(aes(x=periodo,y=bolsa))+
geom_line(group=1,size=1,colour="#29aee4")+
scale_y_continuous(limits=c(0,20000),breaks=seq(0,20000,6000))+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2021-09-01'),105))+
labs(y = "Toneladas", title="Despacho cemento en bolsa", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
bolsa.var.graf<- cemento %>% filter(periodo>='2017-01-01') %>%              ggplot(aes(x=periodo,y=var.bolsa))+
geom_bar(stat='identity',fill="#29aee4")+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2021-09-01'),105))+
scale_y_continuous(label=percent_format())+
geom_hline(yintercept = 0)+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC.</span>") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line.y = element_line(color='BLACK'),axis.ticks = element_blank(), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(bolsa.graf,bolsa.var.graf,nrow=2)
View(cemento)
bolsa.graf<-cemento %>% filter(periodo>='2017-01-01') %>% ggplot(aes(x=periodo,y=bolsa))+
geom_line(group=1,size=1,colour="#29aee4")+
scale_y_continuous(limits=c(0,20000),breaks=seq(0,20000,6000))+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),105))+
labs(y = "Toneladas", title="Despacho cemento en bolsa", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
bolsa.graf<-cemento %>% filter(periodo>='2017-01-01') %>% ggplot(aes(x=periodo,y=bolsa))+
geom_line(group=1,size=1,colour="#29aee4")+
scale_y_continuous(limits=c(0,20000),breaks=seq(0,20000,6000))+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
labs(y = "Toneladas", title="Despacho cemento en bolsa", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
bolsa.graf<-cemento %>% filter(periodo>='2017-01-01') %>%
ggplot(aes(x=periodo,y=bolsa))+
geom_line(group=1,size=1,colour="#29aee4")+
scale_y_continuous(limits=c(0,20000),breaks=seq(0,20000,6000))+
scale_x_date(labels=scales::date_format(format='%h-%Y'),breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
labs(y = "Toneladas", title="Despacho cemento en bolsa", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
bolsa.var.graf<- cemento %>% filter(periodo>='2017-01-01') %>%
ggplot(aes(x=periodo,y=var.bolsa))+
geom_bar(stat='identity',fill="#29aee4")+
scale_x_date(labels=scales::date_format(format='%h-%Y'), breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
scale_y_continuous(label=percent_format())+
geom_hline(yintercept = 0)+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC.</span>") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line.y = element_line(color='BLACK'),axis.ticks = element_blank(), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
ggarrange(bolsa.graf,bolsa.var.graf,nrow=2)
granel.grafico<- cemento %>% filter(periodo>= '2017-01-01') %>%
ggplot(aes(x=periodo, y=granel))+
geom_line(group=1,size=1,colour="#0c8136")+
scale_x_date(labels = date_format(format='%h-%Y'), breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
#scale_y_continuous(limits=c(0,8000),breaks=seq(0,8000,2000))+
labs(y="Toneladas", title="Despacho cemento a granel", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
granel.var.graf<- cemento %>% filter(periodo>= '2017-01-01') %>%
ggplot(aes(x=periodo,y=var.granel))+
geom_bar(stat='identity',fill="#0c8136")+
scale_x_date(labels = date_format(format='%h-%Y'), breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
geom_hline(yintercept = 0)+
scale_y_continuous(labels=percent_format(), limits=c(-0.5,1.3),breaks=seq(-0.5,1.3,0.4))+
labs(y = "", title="Variación interanual", x = "", caption = "<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de IERIC.</span>")+
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14),axis.line.y = element_line(color='BLACK'),axis.ticks.x = element_blank(), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5), legend.title = element_blank(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
ggarrange(granel.grafico,granel.var.graf,nrow=2)
granel.grafico<- cemento %>% filter(periodo>= '2017-01-01') %>%
ggplot(aes(x=periodo, y=granel))+
geom_line(group=1,size=1,colour="#0c8136")+
scale_x_date(labels = date_format(format='%h-%Y'), breaks=seq(as.Date('2017-01-01'),as.Date('2022-01-01'),120))+
scale_y_continuous(limits=c(0,8000),breaks=seq(0,8000,2000))+
labs(y="Toneladas", title="Despacho cemento a granel", x = "", caption = "") +
theme(axis.text.x = element_text(size=8,angle=45,vjust = 0.5), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 5),axis.line = element_line(color='BLACK'), legend.title = element_blank(),plot.caption = element_blank() , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank(),axis.ticks = element_blank())
granel.grafico
knitr::opts_chunk$set(echo = FALSE,warning = F,message=F, dev="cairo_pdf")
library(tidyverse)
library(readxl)
library(ggplot2)
library(extrafont)
library(ggtext)
library(scales)
library(treemapify)
#Fuente
font_import(paths = "~/GitHub/agricultura y ganaderia/agricultura_ganaderia/Open_Sans",prompt=F)
loadfonts(device = "win", quiet=T)
#Colores
colores<- c("#29aee4","#0c8136","#e22172","#f4a018","#428cb4","#c85687","#dbac2f","#5da14a","#ff9a00")
gradiente<- c("#ed3068","#ef4275","#f3789d","#f69cb7","#fbd2de")
colores_oscuros <- c("#053b19", "#b77409", "#a11550", "#1680ab", "#085222",  "#1891c2")
colores_claros <- c("#13c753",  "#f7be61", "#eb659d", "#6dc8ed", "#10b04a", "#56bfea")
empresas<-read_excel("Agricultura y Ganaderia.xlsx",sheet=1)
colnames(empresas)<- c('fecha','Cantidad Empresas', 'Variación Interanual')
empresas$fecha<- as.Date(empresas$fecha, origin='2017-01-01')
ggplot(empresas,aes(x=fecha,y= `Cantidad Empresas`))+
geom_line(group=1,size=1.2, colour="#29aee4")+
scale_y_continuous(limits=c(5,25))+
scale_x_date(labels = date_format('%h-%Y'), breaks = seq(as.Date('2017-01-01'),as.Date('2022-01-01'), 120))+
labs(y= "", x="" ,title ="Cantidad de empresas en el sector agrícola y ganadero", caption="<span style='color: #5f6368;'>Fuente: Elaboración propia con datos obtenidos de ACOR.</span>")+
theme(text = element_text(family = "Open Sans", colour = "BLACK"), plot.title = element_markdown(size=14),axis.line = element_line(color='BLACK'), plot.title.position = "plot", plot.subtitle = element_text(size = 10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 1), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 9),axis.text.x=(element_text(size=8,angle=45,vjust = 0.5)),plot.caption = element_markdown(size=8,hjust = 0), panel.background = element_blank(),strip.background = element_blank(),strip.text = element_text(face = 'bold'),axis.ticks.x = element_blank())
#Composicion de las exportaciones provinciales
exportaciones<-read_excel("Agricultura y Ganaderia.xlsx",sheet=5)
exportaciones<- exportaciones[-c(1:17)]
exportaciones<-exportaciones[1:8,]
exportaciones[is.na(exportaciones)] <- 0
exportaciones<-as.data.frame(t(exportaciones))
names(exportaciones)<- c(exportaciones[1,])
exportaciones<-rownames_to_column(.data = exportaciones,var = 'fecha')
exportaciones<-exportaciones[2:6,]
exportaciones<- pivot_longer(exportaciones,-fecha)
exportaciones$value<-as.numeric(exportaciones$value)
exportaciones<- exportaciones %>%  mutate(fecha=case_when(fecha=="2016...19" ~2016,
fecha=='2017...20'~2017,
fecha=='2018...21'~2018,
fecha=='2019...22'~2019,
fecha=='2020...23'~2020),
name=case_when(name=='Café, té, yerba mate y especias' ~ 'Café, té, \nyerba mate y especias',
name=='Preparados de hortalizas, legumbres y frutas' ~ 'Preparados de hortalizas, \nlegumbres y frutas',
TRUE~name))
ggplot(exportaciones, aes(x=fecha, y=value, fill=name)) +
geom_col(position='stack',size=0.8,width = 0.3)+
coord_flip()+
scale_y_continuous(labels=scales::percent_format())+
scale_fill_manual(values=colores)+
labs(y = "", title="Composición de exportaciones provinciales", x = "", caption = "<span style='color: #5f6368;'>Fuente: Elaboración propia con datos obtenidos de INDEC.</span>") +
theme(axis.text.x = element_text(size=10), text = element_text(family = "Open Sans"), plot.title = element_markdown(size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), axis.title = element_text(size=10), legend.position = "bottom", legend.text = element_text(size = 7),legend.key.size = unit(0.5,'cm'), legend.title = element_blank(), plot.caption = element_markdown(size=8,hjust = 0,colour = "BLACK") , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 8), panel.background = element_blank(), panel.grid.major = element_blank(), axis.ticks.y=element_blank())
paises<-read_excel("Agricultura y Ganaderia.xlsx", sheet = 6)
paises<-paises[ -c(1), ]
paises<- paises %>% mutate(continente=case_when(
region%in%c("Magreb y Egipto","Medio Oriente", "SACU")~ "AFRICA",
region%in%c("Unión Europea (1)", "Reino Unido", "Suiza")~"EUROPA",
region%in%c("Mercosur", "Chile","Resto ALADI","SICA")~"LATAM",
region=="NAFTA"~"NORTE AMERICA \ny MEXICO",
region=="Oceanía"~"OCEANIA",
region%in%c("ASEAN","China","Japón","India","República de Corea")~ "ASIA",
region=="CEI"~ "EUROPA ORIENTAL",
region=="Resto del mundo" ~ "RESTO DEL \nMUNDO"))
paises.2<- paises %>% group_by(continente) %>% summarise("1S 2021"= sum(`1S 2021`))
ggplot(paises.2,aes(area=`1S 2021`, fill=continente, label=continente))+
geom_treemap()+
geom_treemap_text(color="#000000",place="center", family="Open Sans")+
scale_fill_manual(values=c("#13c753","#0a6a2c","#13c753","#e1ffdb","#053b19","#88fc6f","#e1ffdb","#88fc6f"))+
labs(title="Destino de las exportaciones provinciales", subtitle="Primer semestre 2021" ,y="",x="",caption = "<span style='color:  #5f6368;'>Fuente: elaboración propia con datos obtenidos de INDEC.</span>") +
theme(axis.text.x = element_text(size=8),axis.line = element_line(color='BLACK'),axis.ticks.y = element_blank(), text = element_text(family = "Open Sans"), plot.title = element_markdown(family = "Open Sans", size = 14), plot.title.position = "plot",plot.subtitle = element_markdown(size = 10), legend.position = "none", legend.text = element_text(size = 5), legend.title = element_text(),axis.title = element_text(),plot.caption = element_markdown(size=8,hjust = 0) , axis.text = element_text(colour = "BLACK", family="Open Sans", size = 7), panel.background = element_blank(), panel.grid.major = element_blank())
base.faena<-read_excel("Agricultura y Ganaderia.xlsx", sheet = 3)
base.faena[c(4,5,6,7,8,9,10,11)]<-list(NULL)
colnames(base.faena)<- c('fecha','Faena Bovina','Faena Porcina')
#base.faena$fecha<-as.Date(base.faena$fecha,"%y,%m,%d")
base.faena<-base.faena %>% pivot_longer(-c("fecha"))
base.faena$fecha<-as.Date(base.faena$fecha, origin='2018-01-01')
base.faena %>% ggplot( aes(x=fecha,y=value))+
geom_point(size=3,aes(color=name))+
geom_line(size=1, aes(color=name,group=name)) +
scale_color_manual(values=colores)+
facet_wrap(facets= vars(name),scales = 'free', nrow = 2)+
scale_x_date(labels = scales::date_format(format = '%h-%Y'),breaks = seq(as.Date('2018-01-01'),as.Date('2022-01-01'),120))+
labs(y= "", x="" ,title ="Faena <span style = 'color: #29aee4;'>**bovina**</span> y <span style = 'color: #0c8136;'>**porcina**</span> de la Provincia de Corrientes <br>(por cabeza)", subtitle='',caption="<span style='color: #5f6368;'>Fuente: elaboración propia con datos obtenidos de INDEC.</span>")+
theme(text = element_text(family = "Open Sans", colour = "BLACK"), axis.line =element_line(color='BLACK') ,plot.title = element_markdown(size=14), plot.title.position = "plot", plot.subtitle=element_text(size=10), axis.title = element_text(size=10), legend.position = "none", legend.text = element_text(size = 10), axis.text = element_text(colour = "BLACK", family="Open Sans", size = 9),axis.text.x = element_text(size=8,angle=45,vjust = 0.5),plot.caption = element_markdown(size=8, hjust=0), panel.background = element_blank(),strip.background = element_blank(),strip.text = element_text(face = 'bold'), axis.ticks.x =element_blank() )
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(formattable)
enero1<- read.csv2("1_ENERO.csv", sep = "/t")
setwd("~/GitHub/EYD/reporte-mensual-cine-argentina/enero")
enero1<- read.csv2("1_ENERO.csv", sep = "/t")
enero1<- read.csv2("1_ENERO.csv", sep = "/t")
enero1<- read.csv2("1_ENERO.csv")
enero1<- read.csv2("1_ENERO.csv", sep = "/t")
enero2<- read.csv2("2_ENERO.csv", sep = "/t")
enero1<- read.csv("1_ENERO.csv", sep = "/t")
enero1<- read.csv2("1_ENERO.csv",header=T, sep = "/t")
enero1<-read.t("1_ENERO.csv",header=T, sep = "/t")
enero1<-read.table("1_ENERO.csv",header=T, sep = "/t")
library(readr)
enero1<-read_table2("1_ENERO.csv",header=T, sep = "/t")
enero1<-read_table2("1_ENERO.csv",header=T)
enero1<-read_table2("1_ENERO.csv")
View(enero1)
enero1<-read_table2("1_ENERO.csv", sep="/t")
enero1<-read_table2("1_ENERO.csv", sep="\t")
enero1<-read_table2("1_ENERO.csv", sep=";")
enero1<-read_table2("1_ENERO.csv", sep=",")
enero1<-read_table2("1_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero1<-read.table("1_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
View(enero1)
enero1<-read.table("1_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero2<-read.table("2_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero3<-read.table("3_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero4<-read.table("4_ENERO.csv",  sep = "\t", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
View(enero2)
enero2<-read.table("2_ENERO.csv",  sep = ";", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero3<-read.table("3_ENERO.csv",  sep = ";", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
enero4<-read.table("4_ENERO.csv",  sep = ";", dec = ".", header = TRUE,
encoding = "UTF-8", stringsAsFactors = FALSE, quote = "")
View(enero3)
View(enero4)
enero<- left_join(enero1,enero2,enero3,enero4)
enero<- left_join(enero1,enero2,enero3,enero4, all.x=T)
enero<- left_join(enero1,enero2,enero3,enero4, by= "Titulo")
